"use strict";function initialize(){var e={zoom:6,center:new google.maps.LatLng(35.644033,-121.1875503),mapTypeControl:!1,disableDefaultUI:!0};map=new google.maps.Map(document.getElementById("map-canvas"),e),setMarkers(markers),setAllMap()}function setAllMap(){for(var e=0;e<markers.length;e++)markers[e].boolTest===!0?markers[e].holdMarker.setMap(map):markers[e].holdMarker.setMap(null)}function setMarkers(e){for(var t=0;t<e.length;t++){e[t].holdMarker=new google.maps.Marker({position:new google.maps.LatLng(e[t].lat,e[t].lng),map:map,title:e[t].title,icon:{url:"http://maps.google.com/mapfiles/ms/icons/purple.png",size:new google.maps.Size(25,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12.5,40)},shape:{coords:[1,25,-40,-25,1],type:"poly"}}),e[t].contentString=e[t].title+"</strong><br><p>"+e[t].streetAddress+"<br>"+e[t].cityAddress+'<br></p><a class="web-links" href="http://'+e[t].url+'" target="_blank">'+e[t].url+"</a>";var r=new google.maps.InfoWindow({content:markers[t].contentString});new google.maps.event.addListener(e[t].holdMarker,"click",function(t,o){return function(){r.setContent(e[o].contentString),r.open(map,this),map.setCenter(t.getPosition()),toggleBounce(e[o].holdMarker),getWikiLinks(e[o].title)}}(e[t].holdMarker,t));var o=$("#nav"+t);o.click(function(t,o){return function(){r.setContent(e[o].contentString),r.open(map,t),map.setCenter(t.getPosition()),toggleBounce(e[o].holdMarker),getWikiLinks(e[o].title)}}(e[t].holdMarker,t))}}function toggleBounce(e){currentMarker&&currentMarker.setAnimation(null),currentMarker=e,e.setAnimation(google.maps.Animation.BOUNCE)}function getWikiLinks(e){var t="https://en.wikipedia.org/w/api.php?action=opensearch&search="+e+"&format=json&callback=wikiCallback",r={url:t,dataType:"jsonp",timeout:7e3,success:function(e){var t=e[0],r="http://en.wikipedia.org/wiki/"+t;$(".web-links").append('<li><a href="'+r+'">'+t+"</a></li>")},error:function(e,t,r){alert("Status: "+t),alert("Error: "+r)}};$.ajax(r)}var map,markers=[{title:"Sea World",lat:32.7639528,lng:-117.2267477,streetAddress:"500 Sea World Dr",cityAddress:"San Diego, CA 92109",url:"https://seaworldparks.com/en/seaworld-sandiego/",id:"nav0",visible:ko.observable(!0),boolTest:!0},{title:"Disney Land",lat:33.805825,lng:-117.9229715,streetAddress:"1313 Disneyland Dr",cityAddress:"Anaheim, CA 92802",url:"https://disneyland.disney.go.com/",id:"nav1",visible:ko.observable(!0),boolTest:!0},{title:"Hearst Castle",lat:35.644033,lng:-121.1875503,streetAddress:"750 Hearst Castle Rd",cityAddress:"San Simeon, CA 93452",url:"http://hearstcastle.org/",id:"nav2",visible:ko.observable(!0),boolTest:!0},{title:"Monterey Bay Aquarium",lat:36.618266,lng:-121.902339,streetAddress:"886 Cannery Row",cityAddress:"Monterey, CA 93940",url:"www.montereybayaquarium.org/",id:"nav3",visible:ko.observable(!0),boolTest:!0},{title:"Golden Gate",lat:37.800856,lng:-122.398635,streetAddress:"Pier 39",cityAddress:"San Francisco, CA 94111",url:"http://www.goldengate.org/",id:"nav4",visible:ko.observable(!0),boolTest:!0},{title:"Lake Tahoe",lat:39.104083,lng:-119.957676,streetAddress:"3411 Lake Tahoe Blvd",cityAddress:"South Lake Tahoe, CA",url:"http://laketahoe.com/",id:"nav5",visible:ko.observable(!0),boolTest:!0},{title:"Lake Elsinore",lat:33.7529,lng:-116.0556,streetAddress:" 130 South Main Street ",cityAddress:"Lake Elsinore, CA 92530",url:"http://www.lake-elsinore.org/",id:"nav6",visible:ko.observable(!0),boolTest:!0}],currentMarker=null,viewModel={query:ko.observable("")};viewModel.markers=ko.dependentObservable(function(){var e=this,t=e.query().toLowerCase();return ko.utils.arrayFilter(markers,function(e){return e.title.toLowerCase().indexOf(t)>=0?(e.boolTest=!0,e.visible(!0)):(e.boolTest=!1,setAllMap(),e.visible(!1))})},viewModel),ko.applyBindings(viewModel),$("#input").keyup(function(){setAllMap()});